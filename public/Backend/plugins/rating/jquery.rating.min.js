window.jQuery&&function(a){if(a.browser.msie)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(m){}a.fn.rating=function(c){if(0==this.length)return this;if("string"==typeof arguments[0]){if(1<this.length){var d=arguments;return this.each(function(){a.fn.rating.apply(a(this),d)})}a.fn.rating[arguments[0]].apply(this,a.makeArray(arguments).slice(1)||[]);return this}c=a.extend({},a.fn.rating.options,c||{});a.fn.rating.calls++;this.not(".star-rating-applied").addClass("star-rating-applied").each(function(){var b,
d=a(this),k=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,""),i=a(this.form||document.body),g=i.data("rating");if(!g||g.call!=a.fn.rating.calls)g={count:0,call:a.fn.rating.calls};var f=g[k];f&&(b=f.data("rating"));if(f&&b)b.count++;else{b=a.extend({},c||{},d.data()||{},{count:0,stars:[],inputs:[]});b.serial=g.count++;f=a('<span class="star-rating-control"/>');d.before(f);f.addClass("rating-to-be-drawn");if(d.attr("disabled")||d.hasClass("disabled"))b.readOnly=!0;d.hasClass("required")&&
(b.required=!0);f.append(b.cancel=a('<div class="rating-cancel"><a title="'+b.cancel+'">'+b.cancelValue+"</a></div>").mouseover(function(){a(this).rating("drain");a(this).addClass("star-rating-hover")}).mouseout(function(){a(this).rating("draw");a(this).removeClass("star-rating-hover")}).click(function(){a(this).rating("select")}).data("rating",b))}var e=a('<div class="star-rating rater-'+b.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");f.append(e);this.id&&e.attr("id",
this.id);this.className&&e.addClass(this.className);b.half&&(b.split=2);if("number"==typeof b.split&&0<b.split){var h=(a.fn.width?e.width():0)||b.starWidth,l=b.count%b.split,h=Math.floor(h/b.split);e.width(h).find("a").css({"margin-left":"-"+l*h+"px"})}b.readOnly?e.addClass("star-rating-readonly"):e.addClass("star-rating-live").mouseover(function(){a(this).rating("fill");a(this).rating("focus")}).mouseout(function(){a(this).rating("draw");a(this).rating("blur")}).click(function(){a(this).rating("select")});
this.checked&&(b.current=e);"A"==this.nodeName&&a(this).hasClass("selected")&&(b.current=e);d.hide();d.change(function(){a(this).rating("select")});e.data("rating.input",d.data("rating.star",e));b.stars[b.stars.length]=e[0];b.inputs[b.inputs.length]=d[0];b.rater=g[k]=f;b.context=i;d.data("rating",b);f.data("rating",b);e.data("rating",b);i.data("rating",g)});a(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn");return this};a.extend(a.fn.rating,{calls:0,focus:function(){var c=this.data("rating");
if(!c||!c.focus)return this;var d=a(this).data("rating.input")||a("INPUT"==this.tagName?this:null);c.focus&&c.focus.apply(d[0],[d.val(),a("a",d.data("rating.star"))[0]])},blur:function(){var c=this.data("rating");if(!c||!c.blur)return this;var d=a(this).data("rating.input")||a("INPUT"==this.tagName?this:null);c.blur&&c.blur.apply(d[0],[d.val(),a("a",d.data("rating.star"))[0]])},fill:function(){var a=this.data("rating");if(!a)return this;a.readOnly||(this.rating("drain"),this.prevAll().andSelf().filter(".rater-"+
a.serial).addClass("star-rating-hover"))},drain:function(){var a=this.data("rating");if(!a)return this;a.readOnly||a.rater.children().filter(".rater-"+a.serial).removeClass("star-rating-on").removeClass("star-rating-hover")},draw:function(){var c=this.data("rating");if(!c)return this;this.rating("drain");c.current?(c.current.data("rating.input").attr("checked","checked"),c.current.prevAll().andSelf().filter(".rater-"+c.serial).addClass("star-rating-on")):a(c.inputs).removeAttr("checked");c.cancel[c.readOnly||
c.required?"hide":"show"]();this.siblings()[c.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(c,d){var b=this.data("rating");if(!b)return this;if(!b.readOnly){b.current=null;if("undefined"!=typeof c){if("number"==typeof c)return a(b.stars[c]).rating("select",void 0,d);"string"==typeof c&&a.each(b.stars,function(){a(this).data("rating.input").val()==c&&a(this).rating("select",void 0,d)})}else b.current="INPUT"==this[0].tagName?this.data("rating.star"):this.is(".rater-"+
b.serial)?this:null;this.data("rating",b);this.rating("draw");var j=a(b.current?b.current.data("rating.input"):null);(d||void 0==d)&&b.callback&&b.callback.apply(j[0],[j.val(),a("a",b.current)[0]])}},readOnly:function(c,d){var b=this.data("rating");if(!b)return this;b.readOnly=c||void 0==c?!0:!1;d?a(b.inputs).attr("disabled","disabled"):a(b.inputs).removeAttr("disabled");this.data("rating",b);this.rating("draw")},disable:function(){this.rating("readOnly",!0,!0)},enable:function(){this.rating("readOnly",
!1,!1)}});a.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16};a(function(){a("input[type=radio].star").rating()})}(jQuery);