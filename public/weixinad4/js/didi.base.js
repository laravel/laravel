var getQuerySting,getQueryData,didi;!function(){"use strict";var a=window.didi||{};window.didi=a,a._cfg={},a.init=function(b){b=b||{},b.id&&a.trace({id:b.id,data:b.data||{}});var c=a._cfg;"auto"===b.debug&&(b.debug=a.is("dev")),c.debug=!!b.debug,b.debug===!0,b.wxSignFn?c.wxSignFn=b.wxSignFn:b.wxSignApi&&(c.wxSignApi=b.wxSignApi),"undefined"!=typeof b.share?a.setShare(b.share):a.app.setShare(!1)},$.getScript=function(a,b){var c=document.createElement("script");c.type="text/javascript",c.src=a,document.getElementsByTagName("head")[0].appendChild(c),c.onload=c.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||"function"==typeof b&&b()}},$.fn.touch=function(b,c,d){var g,h,i,j,k,l,e=$(this),f=!1;if(b===!1)return e.off(".touch"),this;if("string"==typeof b&&c===!1)return e.off(".touch",b),this;if("string"==typeof b&&$.isFunction(c))f=!0;else{if(!$.isFunction(b))return this;f=!1,c=b,d=c}return g=0,h=0,i=a.is("mobile"),j=function(a,b){d!==!1&&(b?a.addClass("active"):a.removeClass("active"))},a._cfg.lastTouch=+new Date,k=function(c,d){c="touch"+c+".touch";var g=function(){d.apply(this,arguments),a._cfg.lastTouch=+new Date};f?e.on(c,b,g):e.on(c,g)},l=function(c,d){c="mouse"+c+".touch";var g=function(){var c=+new Date;(!i||a.is("chrome")&&c-a._cfg.lastTouch>1e3)&&d.apply(this,arguments)};f?e.on(c,b,g):e.on(c,g)},k("start",function(a){j($(this),!0);var b=a.touches||a.originalEvent&&a.originalEvent.touches||[{}];b=b[0],g=b.pageX,h=b.pageY}),k("move",function(a){var b=a.touches||a.originalEvent&&a.originalEvent.touches||[{}];b=b[0],Math.abs(b.pageX-g)+Math.abs(b.pageY-h)>15?($(this).attr("moved","true"),j($(this),!1)):($(this).attr("moved","false"),j($(this),!0))}),k("end",function(a){j($(this),!1),"true"!==$(this).attr("moved")?c.call(this,a):$(this).attr("moved","false")}),k("cancel",function(){j($(this),!1),$(this).attr("moved","false")}),l("down",function(){j($(this),!0)}),l("leave",function(){j($(this),!1)}),l("up",function(a){j($(this),!1),c.call(this,a)}),this},$.fn.loading=function(a){$(this),"string"==typeof a&&(a={text:a})}}(),getQuerySting=function(){var g,h,a=location.search.length?location.search.substring(1):"",b={},c=a.split("&"),d=null,e=null,f=null;if(c)for(g=0,h=c.length;h>g;g++)d=c[g].split("="),e=decodeURIComponent(d[0]),f=decodeURIComponent(d[1]),b[e]=f;return b},getQueryData=function(a){var b=getQuerySting();return void 0===b[a]?"":b[a]},function(){"use strict";var b,c,d,e,f,g,h,i,j,k,a=window.didi||{};window.didi=a,b=null,c=null,d=null,e=null,f=null,g=null,h=null,i=function(a){return c=window.document,d=c.documentElement,e=c.body,this instanceof i?(new i.fn.init(a),void 0):h=new i(a)},j=function(a){var b=!1;return b=Array.isArray(a)},k=function(a){$("body").append(a)},i.fn=i.prototype={constructor:i,init:function(a){var b,d,h,i,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;if(a){if(b=c.createElement("div"),b.id="d_wall",b.style.backgroundColor=a.bgcolor||"black",b.style.opacity=a.opacity||"0.2",b.style.filter=a.opacity?"alpha(opacity="+100*a.opacity+")":"alpha(opacity=20)",b.className="didi-dialog-wall",d=c.createElement("div"),d.id="d_wrap",d.style.width=a.width||"260px",d.style.height=a.height||"210px",d.style.backgroundColor=a.d_bgcolor||"#fff",d.style.opacity=a.d_opacity?a.d_opacity:"",d.style.filter=a.d_opacity?"alpha(opacity="+100*a.d_opacity+")":"alpha(opacity=20)","loading"===a.type&&(d.style.padding="0px"),d.setAttribute("dialog-type",a.type),d.className="didi-dialog-wrap",h="",h+="<div style='"+("loading"===a.type?"padding:0px;":"padding: 0px 16px;")+"'>",a.dom&&1===a.dom.nodeType?h+=a.dom.outerHTML:a.html&&"string"==typeof a.html?h+=a.html:a.domId&&a.domId.length&&(i=c.getElementById(a.domId),i&&(h+=i.outerHTML)),a.icon?(l=a.icon.type,m=a.icon.width||"61px",n=a.icon.height||"61px",l&&(o="",o="loading"===a.type?"margin:36px 0px 10px 0":"margin:20px 0px 12px 0",p="dialog-icon icon-"+l,"loading"===l&&(p="icon-loading"),h+='<p class="didi_dialog_icon" style="'+o+'"><span class="'+p+'" style="display: inline-block; width:'+m+";height:"+n+"; background-size:"+m+" "+n+';"></span></p>')):h+='<div class="no-icon" style="height:20px"></div>',a.title&&j(a.title))for(q=0,r=a.title.length;r>q;q++)s=a.title[q],s&&(t=s.color||"#ff8a01",u=s.fontSize||"1.4em",h+='<p class="didi-dialog-title" style="color:'+t+";font-size:"+u+';">'+s.txt+"</p>");if(a.tips&&j(a.tips))for(v=0,w=a.tips.length;w>v;v++)x=a.tips[v],x&&(y=x.color||"#666666",z=x.fontSize||"1.0em",h+='<p class="didi-dialog-p" style="color:'+y+";font-size:"+z+';">'+x.txt+"</p>");if(a.btns&&j(a.btns)){for(h+='<div id="d_dialog_footer" class="didi-dialog-footer">',A=0,B=a.btns.length;B>A;A++)C=a.btns[A],C&&(h+="confirm"===a.type?'<a class="'+C.klsName+'" id="'+C.id+'" style="width: 118px; height: 37px; line-height: 35px; margin:0 3px;">'+C.txt+"</a>":'<a class="'+C.klsName+'" id="'+C.id+'" style="width: 100%;">'+C.txt+"</a>");h+="</div>"}h+="</div>",d.innerHTML=h,D=c.getElementById("d_wall"),E=c.getElementById("d_wrap"),D?(e.removeChild(D),k(b)):k(b),E?(e.removeChild(E),k(d)):k(d),f=c.getElementById("d_wall"),g=c.getElementById("d_wrap"),a.btns&&a.btns.length&&j(a.btns)&&$.each(a.btns,function(a,b){if(b){var d=b.id,e=b.eventType||"click",f=b.callback,g=c.getElementById(d);g&&!g["on"+e]&&("click"===e?$(g).touch(function(a){a.preventDefault(),a.stopPropagation(),setTimeout(function(){f(a)},0)},!0):g.addEventListener(e,f,!1))}})}},_dialogPosi:function(){var j,k,a=d.scrollTop,b=d.scrollLeft,e=d.clientHeight,f=c.getElementsByTagName("body")[0].offsetWidth,h=g.style.height.replace("px",""),i=g.style.width.replace("px","");return"auto"===h&&(h=220),j=a+(e-h-20)/2,k=b+(f-i)/2,{top:j,left:k}}},i.fn.show=function(){var h,i,j,k,a=this;f&&g&&(h=e.scrollHeight,i=d.clientWidth,j=c.documentElement.scrollTop||c.body.scrollTop,f.style.width=i+"px",f.style.height=h+"px",f.style.display="block",k=this._dialogPosi(),g.style.top=k.top+j+"px",g.style.left=k.left+"px",g.style.display="block",window.addEventListener("resize",function(){a.reset.call(a)},!1),window.addEventListener("scroll",function(){a.reset.call(a),j=c.documentElement.scrollTop||c.body.scrollTop,g.style.top=k.top+j+"px"},!1)),b&&clearTimeout(b)},i.fn.hide=function(a){if(a&&"string"==typeof a&&g){var c=g.getAttribute("dialog-type");if(a!==c)return!1}f&&g&&(f.style.display="none",g.style.display="none"),b&&clearTimeout(b)},i.fn.reset=function(){var b,d,e,a=f.style.display;"block"===a&&f&&g&&(b=c.documentElement.scrollHeight,d=c.documentElement.clientWidth,f.style.width=d+"px",f.style.height=b+"px",e=this._dialogPosi(),g.style.top=e.top+"px",g.style.left=e.left+"px")},a.alert=function(a,b,c){if(c=c||{},a===!1)return i.fn.hide("alert");var d={type:"alert",bgcolor:"black",height:"auto",width:c.width||"280px",tips:[{txt:a,fontSize:"1.1em"}],btns:[{id:"btn_close",txt:c.text||"我知道了",klsName:"btn-orange",eventType:"click",callback:function(){h.hide(),b&&b()}}]};c.icon!==!1&&(d.icon={type:c.icon||"alert",width:"61px",height:"61px"}),h=new i(d),h.show()},a.confirm=function(a,b,c,d){if(d=d||{},a===!1)return i.fn.hide("confirm");var e={type:"confirm",height:"auto",width:d.width||"280px",tips:[{txt:a||"确定执行此操作吗？",color:"#666666",fontSize:"1.04em"}],btns:[{id:"btn-cancel",txt:d.cancelText||"取消",klsName:"btn-white",eventType:"click",callback:function(){h.hide(),"function"==typeof c&&c()}},{id:"btn-ok",txt:d.confirmText||"确定",klsName:"btn-orange",eventType:"click",callback:function(){h.hide(),"function"==typeof b&&b()}}]};d.icon!==!1&&(e.icon={type:d.icon||"alert",width:"60px",height:"60px"}),h=new i(e),h.show()},a.loading=function(a,c,d){if(a===!1)return i.fn.hide("loading");var e={type:"loading",bgcolor:"#ffffff",d_bgcolor:"black",d_opacity:"0.7",width:"125px",height:"125px",icon:{type:"loading",width:"30px",height:"30px"},tips:[{txt:a||"正在加载...",color:"#FFFFFF",fontSize:"13px"}]};h=new i(e),h.show(),(null===c||void 0===c)&&(c=1e4),c&&(b&&clearTimeout(b),b=window.setTimeout(function(){h.hide()},c)),d&&d()},window.didi.dialog=i}(),didi=window.didi||{},function(){"use strict";didi.getData=function(a){if(void 0!==localStorage[a])return localStorage[a];var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return b=document.cookie.match(c),b?unescape(b[2]):null},didi.setData=function(a,b){localStorage[a]=b;var c=new Date;c.setTime(c.getTime()+2592e3),document.cookie=a+"="+escape(b)+";expires="+c.toGMTString()},didi.delData=function(a){var b=didi.getData(a);void 0!==b&&(delete localStorage[a],didi.getData(a)&&(document.cookie=a+"="+b+";expires="+new Date(0).toGMTString()))},didi.err=function(a){console.log("ERR:"+a)},didi.ua=function(){var a={android:/android/i,iphone:/iphone/i,ipad:/ipad/i,ipod:/ipod/i,weixin:/micromessenger/i,mqq:/QQ\//i,app:/didi.passenger/i,sdk:/didi.sdk/i,alipay:/aliapp/i,chrome:/chrome\//i},b={},c=window.navigator.userAgent;return $.each(a,function(a,d){b[a]=d.test(c)}),b.ios=b.iphone||b.ipad||b.iphone,b.mobile=b.ios||b.android,b.pc=!b.mobile,b.prod=/(udache.com|diditaxi.com.cn|xiaojukeji.com)\//.test(window.location.href),b.dev=!b.prod,window.chrome&&window.chrome&&(b.chrome=!0),b.app||(b.app=!!window.DidiJSBridge),b.didi=b.app,b},didi.is=function(a){var b=a.split(","),c=didi.ua(),d=function(a){var b,d;return(a=$.trim(a)||"")?(b=a.split("."),d=!0,$.each(b,function(a,b){return c[b]?void 0:(d=!1,!1)}),d):!1},e=!1;return $.each(b,function(a,b){return d(b)?(e=!0,!1):void 0}),e}}(),function(){"use strict";var a=function(a){a=a||"",a=a.split("."),a.length=4;var b=[];return $.each(a,function(a,c){c=1*c,c?b.push(c>10?c:"0"+c):b.push("00")}),parseInt(b.join(""),10)};didi.version=function(){},didi.version.compare=function(b,c,d){return b=a(b),d=a(d),c=$.trim(c)||"",-1!==c.indexOf("=")&&b===d?!0:-1!==c.indexOf(">")&&b>d?!0:-1!==c.indexOf("<")&&d>b?!0:!1},didi.version.parse=a}(),function(){"use strict";var a={data:{},sign:"",pv:function(b){var c=a.data={id:b.id,data:b.data||{}};$.ajax({url:"http://gsactivity.diditaxi.com.cn/gulfstream/recommend/v1/activity/pv",data:{a_id:c.id,data:c.data},dataType:"jsonp",success:function(b){a.sign=b.sign}})},log:function(b,c,d){$.isFunction(c)&&(d=c,c={});var e=a.data;$.ajax({url:"http://gsactivity.diditaxi.com.cn/gulfstream/recommend/v1/activity/log",data:{a_id:e.id,action:b,data:c||{},sign:a.sign},dataType:"jsonp",success:function(){d&&d()}})}},b=function(b,c,d){$.isPlainObject(b)&&!a.sign?a.pv(b):"string"==typeof b&&a.log(b,c,d)};$.extend(b,{pv:a.pv,log:a.log}),didi.trace=b}(),function(){"use strict";var QQ,didi=window.didi||{},Share={cache:{},set:function(){}},Weixin={fns:[],isReady:!1,isInit:!1,init:function(){if(!Weixin.isInit){Weixin.isInit=!0;var a=document.createElement("script");a.type="text/javascript",a.src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js",document.getElementsByTagName("head")[0].appendChild(a),a.onload=function(){wx&&wx.hideOptionMenu&&wx.hideOptionMenu(),Weixin.getSign(function(a){var b="onMenuShareTimeline,onMenuShareAppMessage,onMenuShareWeibo,hideOptionMenu,showOptionMenu,hideMenuItems,showMenuItems,chooseWXPay,scanQRCode,checkJsApi".split(","),c={debug:!1,appId:a.appid||a.appId,timestamp:""+(a.timestamp||a.timestamp),nonceStr:a.noncestr||a.nonceStr,signature:a.sign||a.signature};c.jsApiList=b,wx.config(c),wx.ready(function(){Weixin.isReady=!0,$.each(Weixin.fns,function(a,b){b(wx)})}),wx.error(function(){})})}}},is:function(){return/MicroMessenger/i.test(window.navigator.userAgent)},getSign:function(a){var c,d,b=didi._cfg||{};$.isFunction(didi._cfg.wxSignFn)?b.wxSignFn(function(b){a(b)}):(c=location.href.split("#")[0],b.wxSignApi?d=b.wxSignApi:/walletranship.com\//.test(c)?d="http://activity.walletranship.com/wx/getconfig":(d="http://api.udache.com/gulfstream/api/v1/webapp/pJsApiSign",c=encodeURIComponent(c)),$.ajax({dataType:"jsonp",url:d,data:{url:c},success:function(b){0===1*b.errno&&a(b.info||b.data||b)}}))},fn:function(a){return Weixin.is()?0==arguments.length?!0:(Weixin.isReady?a(wx,!0):(Weixin.fns.push(a),Weixin.init()),void 0):!1},setShare:function(a){Weixin.fn(function(b){if(a!==!1){var c={title:a.title||"",link:a.link||a.url||a.href||"",imgUrl:a.imgUrl||a.icon||"",desc:a.desc||a.text||a.content||"",success:a.success||function(){},cancel:a.cancel||function(){}};b.showOptionMenu({}),b.onMenuShareTimeline(c),b.onMenuShareAppMessage(c),b.onMenuShareQQ(c),b.onMenuShareQZone(c),b.onMenuShareWeibo(c)}})},sign:function(){}};didi.weixin=function(a){return Weixin.fn(a)},didi.weixin.getSign=Weixin.getSign,didi.weixin.setShare=Weixin.setShare,didi.weixin.is=Weixin.is,QQ={fns:[],isReady:!1,isInit:!1,init:function(){if(!QQ.isInit){QQ.isInit=!0;var a=document.createElement("script");a.type="text/javascript",a.src="http://pub.idqqimg.com/qqmobile/qqapi.js?_bid=152",document.getElementsByTagName("head")[0].appendChild(a),a.onload=function(){QQ.isReady=!0,$.each(QQ.fns,function(a,b){b(mqq)})}}},is:function(){return didi.is("mqq")},fn:function(a){return didi.is("mqq")?0==arguments.length?!0:(QQ.isReady?a(mqq,!0):(QQ.fns.push(a),QQ.init()),void 0):!1},setShare:function(a){QQ.fn(function(b){if(a===!1)return b.ui.setTitleButtons({right:{hidden:!0}}),void 0;var c={title:a.title||"",share_url:a.link||a.url||a.href||"",image_url:a.imgUrl||a.icon||"",desc:a.desc||a.text||a.content||""};b.data.setShareInfo(c,function(){})})}},didi.qq=function(a){return QQ.fn(a)},didi.qq.getSign=QQ.getSign,didi.qq.setShare=QQ.setShare,didi.qq.is=QQ.is,function(){var ua,isAndroid,GOON,Hack,Bridge,Titan,Share,Version={cfg:{pageClose:{fn:"page_close",callback:!1},pageRefresh:{fn:"page_refresh",callback:!1},pageOpen:{fn:"open_url",sarg:!0,alias:"openUrl",callback:!1,call:function(a){return a.newWindow?GOON:(didi.bridge.openNativeWebPage(a),void 0)}},openNativeWebPage:{call:function(a){return didi.is("ios")&&a.url&&(window.location.href=a.url),GOON}},callNativeLogin:{callback:!1,sarg:!0,call:function(a,b){return b?Bridge.call("callNativeLoginWithCallback",{},b):GOON}},callNativeLoginWithCallback:{support:"4.1"},initEntrance:{fn:"init_entrance",sarg:!0,callback:!1},invokeEntrance:{fn:"invoke_entrance",sarg:!0,callback:!1},showEntrance:{fn:"show_entrance",sarg:!0,callback:!1},hideEntrance:{fn:"hide_entrance",sarg:!0,callback:!1},shareWeixinTimeline:{fn:"share_weixin_timeline",sarg:!0,callback:!1},shareWeixinAppmsg:{fn:"share_weixin_appmsg",sarg:!0,callback:!1},shareQzone:{fn:"share_qzone",sarg:!0,callback:!1},shareQQAppmsg:{fn:"share_qq_appmsg",sarg:!0,callback:!1},shareSinaWeibo:{fn:"share_sina_weibo",sarg:!0,callback:!1},getUserInfo:{support:"3.9.5"},getSystemInfo:{support:"3.9.5"},getLocationInfo:{support:"3.9.5"},imageCutReview:{alias:"callback_image_literature_review",support:"3.9.8"},markupPageClose:{fn:"markup_page_close",callback:!1,support:"4.1.3"},agreeMarkup:{fn:"agree_markup",callback:!1,support:"4.1.3"},disagreeMarkup:{fn:"disagree_markup",callback:!1,support:"4.1.3"},markupGuide:{fn:"markup_guide",callback:!1,support:"4.1.3"}},downloadUrl:{ios:"https://itunes.apple.com/cn/app/di-di-da-che-zhi-jian-shang/id554499054?ls=1&mt=8",android:"http://dldir1.qq.com/diditaxi/apk/didi_psngr.apk"},map:!1,init:function(){Version.map||(Version.map={},$.each(Version.cfg,function(a,b){b.fn||(b.fn=a);var c=a.replace(/([A-Z])/g,"_$1").toLowerCase();Version.map[a]=b,Version.map[b.fn]=b,Version.map[c]=b,b.alias&&$.each(b.alias.split(","),function(a,c){Version.map[c]=b})}))},formatFn:function(a){return Version.getFnCfg(a).fn||a},formatParam:function(a,b){var c=Version.getFnCfg(a);return"object"==typeof b&&c.sarg&&(b=JSON.stringify(b)),b},hasCallback:function(a){return!!Version.getFnCfg(a).callback!=!1},getFnCfg:function(a){var b=a.replace(/\-/g,"_"),c=b.replace(/([A-Z])/g,"_$1").toLowerCase();return Version.init(),Version.map[b]||Version.map[c]||Version.map[a]||{}},parse:function(a){a=a||"",a=a.split("."),a.length=4;var b=[];return $.each(a,function(a,c){c=1*c,c?b.push(c>=10?c:"0"+c):b.push("00")}),parseInt(b.join(""),10)},compare:function(a,b,c){return a=Version.parse(a),c=Version.parse(c),b=$.trim(b)||"",-1!==b.indexOf("=")&&a===c?!0:-1!==b.indexOf(">")&&a>c?!0:-1!==b.indexOf("<")&&c>a?!0:!1},version:function(a){var b,c;if(!a)return b=/didi.passenger\/([\d\.]+)/.exec(ua),b&&b[1]?b[1]:"3.9.4";switch(c=Version.version(),arguments.length){case 1:if(b=/^\s*([>=<]*)\s*([\d\.]+)\s*$/.exec(a),b&&3===b.length)return Version.compare(c,b[1]||"=",b[2]);break;case 2:return Version.version(a+arguments[1]);case 3:return Version.compare.apply(null,arguments)}return!1},support:function(a,b){var c=Version.getFnCfg(a);return c.support?Version.compare(b||Version.version(),">=",c.support):!1}},didi=window.didi||{},$=window.$||{};$.each=$.each||function(a,b){var c,d,e;if("[object Array]"===Object.prototype.toString.call(a))for(c=0,d=a.length;d>c;c++)b(c,a[c]);else for(e in a)b(e,a[e])},ua=window.navigator.userAgent,isAndroid=/android/i.test(ua),GOON="GOON_BRIDGE_CALL",Hack={reInjection:function(){var a,b;console.log("DidiJSBridge initialization begin"),a={queue:[],callback:function(){var a=Array.prototype.slice.call(arguments,0),b=a.shift(),c=a.shift();this.queue[b].apply(this,a),c||delete this.queue[b]}},a.callHandler=function(){var c,d,e,f,g,h,i,b=Array.prototype.slice.call(arguments,0);if(b.length<1)throw"DidiJSBridge call error, message:miss method name";for(c=[],d=b.shift(),e=0;e<b.length;e++)f=b[e],g=typeof f,c.push(g),"function"===g&&(h=a.queue.length,a.queue[h]=f,b[e]=h);if(i=JSON.parse(prompt(JSON.stringify({method:d,types:c,args:b}))),200!==i.code)throw"DidiJSBridge call error, code:"+i.code+", message:"+i.result;return i.result},Object.getOwnPropertyNames(a).forEach(function(b){var c=a[b];"function"==typeof c&&"callback"!==b&&(a[b]=function(){return c.apply(a,[b].concat(Array.prototype.slice.call(arguments,0)))})}),window.DidiJSBridge=a,b=document.createEvent("HTMLEvents"),b.initEvent("DidiJSBridgeReady",!1,!1),document.dispatchEvent(b),console.log("DidiJSBridge initialization end")}},Bridge={isPre:!1,isReady:!1,fns:[],prepare:function(){var a,b,c;Bridge.isPre||(a=null,b=0,c=function(){"undefined"!=typeof DidiJSBridge&&(Bridge.getBridge(function(a){$.each(Bridge.fns,function(b,c){c(a)}),Bridge.fns=[]}),a&&clearInterval(a),document.removeEventListener("DidiJSBridgeReady",c,!1))},document.addEventListener("DidiJSBridgeReady",c,!1),a=setInterval(function(){c(),b++,b>100&&a&&clearInterval(a)},100),Bridge.isPre=!0)},waitBridgeFn:null,waitBridgeCount:0,getBridge:function(a){var b=window.DidiJSBridge;if(Bridge.isReady)return a(b);if(isAndroid){if(b.queue)return Bridge.isReady=!0,a(b),void 0;Bridge.waitBridgeCount<4?(Bridge.waitBridgeFn&&clearTimeout(Bridge.waitBridgeFn),Bridge.waitBridgeFn=setTimeout(function(){Bridge.waitBridgeCount++,Bridge.getBridge(a)},500)):4===Bridge.waitBridgeCount?(Hack.reInjection(),Bridge.waitBridgeCount++,setTimeout(function(){Bridge.getBridge(a)},50)):(Bridge.isReady=!0,a(b))}else setTimeout(function(){try{b.init&&b.init({})}catch(c){}Bridge.isReady=!0,a(b)},500)},fn:function(a){return 0===arguments.length?!0:"string"==typeof a?Bridge.call.apply(null,arguments):(Bridge.isReady?Bridge.getBridge(a):(Bridge.fns.push(a),Bridge.prepare()),void 0)},call:function(fnName,params,callback){var cfg,ret;return"function"==typeof params&&(callback=params,params={}),cfg=Version.getFnCfg(fnName),cfg.call&&(ret=cfg.call(params,callback),ret!==GOON)?ret:(Titan.supply()?Titan.call(fnName,params,callback):Bridge.fn(function(bridge){fnName=Version.formatFn(fnName),params=Version.formatParam(fnName,params);var hasCallback=cfg.callback!==!1;hasCallback&&callback?bridge.callHandler(fnName,params,function(data){"string"==typeof data&&(data=eval("("+data+")")),"function"==typeof callback&&callback(data)}):params?bridge.callHandler(fnName,params):bridge.callHandler(fnName)}),void 0)},open:function(a){var b,c,d,e,f;a=a||{},"string"==typeof a&&(a={biz:a}),b=Date.now(),c="didipasnger://common_marketing_host",d={0:"出租车|taxi|打车|0",1:"专车|udache|1",2:"快车|flier|fastcar|2",3:"顺风车|shunfengche|3",4:"代驾|daijia|4"},e=0,f=a.business||a.biz,f&&($.each(d,function(a,b){b.indexOf(f)>-1&&(e=a)}),c=c+"?business="+e),a.loading!==!1&&didi.loading&&didi.loading("请稍候..."),$("<iframe>").attr({src:a.packageUrl||c}).hide().appendTo("body"),setTimeout(function(){var d,e,c=Date.now();(!b||2500>c-b)&&(d=a.system?"ios"===a.system?"ios":"android":isAndroid?"android":"ios",e=a[d]||Version.downloadUrl[d],location.href=e,a.loading!==!1&&didi.loading(!1))},2e3)}},Titan={id:0,callbacks:[],supply:function(){return"undefined"!=typeof didi.bridge._forceTitan?didi.bridge._forceTitan:isAndroid&&Version.version(">= 4.4")},getId:function(){return Titan.id++,"titan_"+Titan.id},call:function(a,b,c){var e,f,d=Titan.getId();Titan.callbacks[d]=c||!1,e={id:d,cmd:Version.formatFn(a),params:b||{}},console.log("before-prompt:"+JSON.stringify(e)),f=prompt(JSON.stringify(e)),console.log("after-prompt:"+f)},callback:function(obj){if(console.log("callback-fn:"+JSON.stringify(obj)),"string"==typeof obj&&(obj=eval("("+obj+")")),obj.id&&obj.result){var fn=Titan.callbacks[obj.id]||!1;"function"==typeof fn&&fn(obj.result),delete Titan.callbacks[obj.id]}}},Share={shareMap:{weixin_timeline:"微信朋友圈",weixin_appmsg:"微信好友",sina_weibo:"新浪微博",qq_appmsg:"QQ",qzone:"QQ空间"},data:{},formatShareData:function(a,b){var c={url:"link,url",icon_url:"icon",img_url:"imgUrl,img_url",title:"title",content:"desc,content",from:"from"},d={title:"滴滴一下，美好出行",from:"native"},e={};return b=b?b+"_":"",$.each(c,function(c,d){c="share_"+c,$.each(d.split(","),function(d,f){return e[c]=e[c]||a[b+f]||"",e[c]?!1:void 0}),e[c]||$.each(d.split(","),function(b,d){return e[c]=e[c]||a[d]||"",e[c]?!1:void 0})}),$.each(d,function(a,b){var c="share_"+a;e[c]=e[c]||b}),e},setShare:function(a,b){var d,c={entrance:{icon:"http://static.xiaojukeji.com/api/img/i-webview-entrance.png"},buttons:[]};a!==!1&&(Share.data=a,d=a.success||function(){},$.each(Share.shareMap,function(b,e){a[b]!==!1&&c.buttons.push({type:"share_"+b,name:e,data:Share.formatShareData(a,b),callback:d})})),a.refresh!==!1&&c.buttons.push({type:"page_refresh",name:"刷新"}),Bridge.fn("init_entrance",c),Bridge.fn("show_entrance"),b&&"function"==typeof b&&b()},share:function(a,b){if(a=a.replace(/\-/g,"_"),Share.shareMap[a]){var c=Share.formatShareData(b||Share.data,a);Bridge.call("share_"+a,c)}}},didi.bridge=Bridge.fn,Version.version.parse=Version.parse,$.each({setShare:Share.setShare,share:Share.share,version:Version.version,support:Version.support,is:Version.is,open:Bridge.open,_callback:Titan.callback},function(a,b){didi.bridge[a]=b}),$.each(Version.cfg,function(a,b){b.public!==!1&&(didi.bridge[a]=function(b,c){didi.bridge(a,b,c)})}),window.didi=didi,window.dd&&(window.dd.bridge=didi.bridge)}(),didi.app=didi.bridge,function(){var a={isPre:!1,isReady:!1,fns:[],init:function(){},prepare:function(){if(!a.isPre){var b=function(){a.isReady=!0,$.each(a.fns,function(a,b){b(window.AlipayJSBridge)})};"undefined"!=typeof window.AlipayJSBridge?b():document.addEventListener("AlipayJSBridgeReady",function(){b()},!1),a.isPre=!0}},fn:function(b){return didi.is("alipay")?0===arguments.length?!0:(a.isReady?b(window.AlipayJSBridge):(a.fns.push(b),a.prepare()),void 0):!1}};didi.alipay=function(b){return a.fn(b)},$(a.init)}(),didi.setShare=function(a){didi.weixin.setShare(a),didi.app.setShare(a),didi.qq.setShare(a)}}(),function(){"use strict";var a={_tipsCont:null,_tips:null,_isTipShow:!1,_tipsNs:"default",_tipsFn:{},tips:function(b,c){var e,f,d=1e4;"number"==typeof c?(d=1e3*c,c="default"):c=c||"default",a._tipsCont?(e=a._tipsCont,f=a._tips):(e=$("<div>").addClass("slide-tips-cont"),f=$("<div>").addClass("slide-tips"),e.append(f).appendTo("body"),e.touch(function(){$(e).removeClass("open")}),a._tipsCont=e,a._tips=f),a._tipsFn[c]&&clearTimeout(a._tipsFn[c]),a._tipsFn[c]=setTimeout(function(){a.tips(!1,c)},d),b===!1?(void 0===c||c===a._tipsNs)&&e.removeClass("open"):setTimeout(function(){f.html(b),e.addClass("open"),a._tipsNs=c})}};didi.tips=a.tips}();